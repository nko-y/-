STL六大组件：

（1）容器container：存放数据的数据结构

（2）算法algorithm：可以与容器组合，sort() erase() find()

（3）迭代器iterators：一种泛型指针

（4）适配器adapters：用来修饰容器接口的东西，STL提供的queue和stack，看似容器其实只是容器适配器

（5）配置器allocators：负责空间配置与管理

（6）仿函数functors：行为类似函数



线程安全

（1）C++标准库中的容器没有直接的线程安全保障，需要用std::mutex等线程支持库来加锁保护

（2）C++11开始引入了一些并发数据结构，提供了原子操作和线程安全功能

- std::atomic确保在多线程中对共享变量的读写是原子的
- std::shared_ptr，引用计数的管理是线程安全的，但不能保证对象本身的线程是安全的



Vector底层实现原理

（1）一句话：实现了一个动态数组

（2）类构成

```c++
class vector : protected vector_base;

struct vector_base{
    // 容器开始位置
    pointer _M_start;
    // 容器结束位置
    pointer _M_finish;
    // 动态内存元素最后一个位置的下一个位置
    pointer _M_end_of_storage;
}
```

（3）构造函数

- 无参构造：不会申请任何的动态内存(因为根本用不到)
- 初始化元素构造：申请了动态对应的动态内存

（4）插入元素：

- 插入到最后：
  - 检查空间是否需要动态分配如果需要就进行翻倍
- 插入不是最后：
  - 检查空间
  - 平移待插入之后的元素全部平移一位，然后插入相对应的位置

（5）删除元素：

- 删除最后的元素：m_finish往前移动一位，不会释放现有已经申请的内存
- 删除不是最后：所有元素前移一位

（6）读取元素(返回元素的引用)：

- 操作符【】
- at()，多了一个检查越界的操作，

（7）修改元素：vector不支持直接修改，只支持获取引用在修改引用

（8）释放空间：

- 用swap传入一个空容器
- 先用clear清理元素，shrink_to_fit释放掉未使用的内存